# Tables 

## Data

### Fishery-dependent data
 
```{r} 
#| label: 'set-rda-dir-tbls'
#| echo: false 
#| warning: false 
#| eval: true 
#| include: false
library(flextable)

# You can save tables to read in as csv or rda files.
# stockplotr generally uses rda files.
# I (Kiva) prefer csv files because they are text files that are easier to track and preview with version control.

# There are many ways to incorporate tables into quarto documents.
# One is using the flextable package via R chunks.
# For help: https://ardata-fr.github.io/flextable-book/

``` 

```{r}
#| label: tbl-all_removals
#| echo: false
#| warning: false
#| tbl-cap: "Landings for bottom trawl, midwater trawl, net, and hook-and-line (mt) fisheries from Washington, Oregon, and California."


# CatchTable <- read.csv("Tables/CatchTable.csv")%>%
# select(-ComModelTotal)
# CatchTable[is.na(CatchTable)] <- 0
# CatchTable |>
#   gt() |>
#  cols_label(
#     year = "Year",
#     ComWA = "Com. WA",
#     ComOR = "Com. OR",
#     ComCA = "Com. CA",
#     ComDiscards = "Com. Discards",
#     Foreign = "For.",
#     RecWA = "Rec. WA",
#     RecOR = "Rec. OR",
#     RecCA = "Rec. CA",
#   ) |> 
#   tab_options(
#     table.font.size = 12,
#     latex.use_longtable = TRUE
#   ) |>
#   as_latex()

```
:::
{{< pagebreak >}}

```{r}
#| label: tbl-hake_removals
#| echo: false
#| warning: false
#| tbl-cap: " Landings (mt) from the foreign & domestic at-sea fleet and the domestic shoreside hake fleet. Catches (mt) from the Pacific whiting at-sea fishery as determined by onboard observers."

library(flextable)
library(dplyr)
library(tidyr)

HakeTable<- read.csv(file.path(here::here(),"report/tables/Table_2_2025.csv"))
flextable(HakeTable) %>%
  colformat_num(j = 1, big.mark = "", digits = 0) %>%
font(fontname = "Times New Roman", part = "all") %>%
  border_outer(part = "all") %>%
  border_inner(part = "all") 

# select(-ComModelTotal)
# CatchTable[is.na(CatchTable)] <- 0
# CatchTable |>
#   gt() |>
#  cols_label(
#     year = "Year",
#     ComWA = "Com. WA",
#     ComOR = "Com. OR",
#     ComCA = "Com. CA",
#     ComDiscards = "Com. Discards",
#     Foreign = "For.",
#     RecWA = "Rec. WA",
#     RecOR = "Rec. OR",
#     RecCA = "Rec. CA",
#   ) |> 
#   tab_options(
#     table.font.size = 12,
#     latex.use_longtable = TRUE
#   ) |>
#   as_latex()

```

:::
{{< pagebreak >}}

```{r}
#| label: tbl-manage-act
#| echo: false
#| warning: false
#| tbl-cap: "A subset of management actions of importance to fisheries that caught Widow Rockfish."

library(flextable)
library(dplyr)
library(tidyr)
ManageTable<- read.csv(file.path(here::here(),"report/tables/Table_3_2025.csv"))
colnames(ManageTable) <- c("Year","Management action")

ManageTable<- ManageTable %>%
  group_by(Year)%>%
  ungroup()
  # mutate(Year_Display = ifelse(row_number() == 1, as.character(Year), "")) %>%
  

flextable(ManageTable) %>%
  set_header_labels(Year = "Year", `Management action` = "Management action") %>%
  merge_v(j = "Year") %>%
  align(j = "Year", align = "center", part = "all") %>%
  align(j = "Management action", align = "left", part = "all") %>%
  font(fontname = "Times New Roman", part = "all") %>%
  border_outer(part = "all") %>%
  border_inner(part = "all") %>%
  colformat_num(j = 1, big.mark = "", digits = 0) %>%
  flextable::width(j = "Year", width = 0.7) %>%  # Year column width
  flextable::width(j = "Management action", width = 5)   # Management action column width


# select(-ComModelTotal)
# CatchTable[is.na(CatchTable)] <- 0
# CatchTable |>
#   gt() |>
#  cols_label(
#     year = "Year",
#     ComWA = "Com. WA",
#     ComOR = "Com. OR",
#     ComCA = "Com. CA",
#     ComDiscards = "Com. Discards",
#     Foreign = "For.",
#     RecWA = "Rec. WA",
#     RecOR = "Rec. OR",
#     RecCA = "Rec. CA",
#   ) |> 
#   tab_options(
#     table.font.size = 12,
#     latex.use_longtable = TRUE
#   ) |>
#   as_latex()

```
